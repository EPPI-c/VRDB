name: Generate Issue Report on Close
on:
  issues:
    types: [closed]  # Se ejecutar√° cuando un issue sea cerrado
jobs:
  generate-md-file:
    name: Test
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4
      - run: |
          echo A comment on issue $NUMBER
        env:
          NUMBER: ${{ github.event.issue.number }}
      - run: |
          echo A comment on body $input
        env:
          BODY: ${{ github.event.issue.body }}
          input: $BODY
      - run: |
          BODY="${{ github.event.issue.body }}"
          tag_steamvr="### Steamvr"
          
          # Filtrar el contenido y asignarlo a una variable
          content_steamvr=$(echo "$BODY" | sed -n "/$tag_steamvr/,/^###/{ /^###/d; p }")
          
          # Imprimir solo el contenido filtrado
          echo "Contenido filtrado: $content_steamvr"

          file="${{ github.action_path }}src/games/beat-saber.md"
          
          sed -i '$ d' "$file"
          cat "${{ github.action_path }}src/games/beat-saber.md"

        shell: bash
